name: "EV Charger Portal"
description: "Payment Manager AddOn for EV Sessions - Uses LAN-local HTTPS portal via MQTT with an HTTPS admin server"
version: "1.1.1"
slug: "ev_portal"
init: false
webui: https://[HOST]:[PORT:8090]/
maintainer: 1VTLander
url: "https://github.com/a-1vtlander/ev_payments_service"
documentation: "https://github.com/a-1vtlander/ev_payments_service/blob/main/addons/ev_portal/README.md"

arch:
  - aarch64
  - amd64
  - armhf
  - armv7

ports:
  8090/tcp: 8090
  8091/tcp: 8091
ports_description:
  8090/tcp: "EV Portal guest HTTPS interface"
  8091/tcp: "EV Portal admin HTTPS interface"

options:
  mqtt_host: "core-mosquitto"
  mqtt_port: 1883
  mqtt_username: ""
  mqtt_password: ""
  home_id: ""
  charger_id: ""
  default_charger_id: ""
  applepay_domain_association: ""
  access_allow_cidrs:
    - "192.168.4.0/22"
    - "100.64.0.0/10"
  square_sandbox: true
  square_sandbox_app_id: ""
  square_sandbox_access_token: ""
  square_production_app_id: ""
  square_production_access_token: ""
  square_location_id: ""
  square_charge_cents: 100
  admin_enabled: true
  admin_username: "admin"
  admin_password: ""
  admin_port_https: 8091
  admin_tls_mode: "self_signed"
  admin_tls_cert_path: ""
  admin_tls_key_path: ""

schema:
  mqtt_host: str
  mqtt_port: int
  mqtt_username: str
  mqtt_password: password
  home_id: str
  charger_id: str
  default_charger_id: str
  applepay_domain_association: str
  access_allow_cidrs:
    - str
  square_sandbox: bool
  square_sandbox_app_id: str
  square_sandbox_access_token: password
  square_production_app_id: str
  square_production_access_token: password
  square_location_id: str
  square_charge_cents: int
  admin_enabled: bool
  admin_username: str
  admin_password: password
  admin_port_https: int
  admin_tls_mode: list(self_signed|provided)
  admin_tls_cert_path: str
  admin_tls_key_path: str
